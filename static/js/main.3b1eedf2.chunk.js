(this["webpackJsonpproject-bg"]=this["webpackJsonpproject-bg"]||[]).push([[0],[,,,,,,,,,,,,function(e,n,t){},,function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},,,,,,function(e,n){function t(e){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}t.keys=function(){return[]},t.resolve=t,e.exports=t,t.id=23},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){"use strict";t.r(n);var c=t(1),a=t(6),r=t.n(a),o=t(2),l=t(3),u=(t(12),t(0)),i=function(e){e.gamePhase;return Object(u.jsx)("div",{id:"bg",children:Object(u.jsx)("div",{className:"noise"})})};i.defaultProps={gamePhase:null};var s=i,b=(t(14),function(e){var n=e.text,t=e.icon,c=e.onClick,a=e.disabled;return Object(u.jsxs)("button",{className:"simple-button"+(a?" disabled":""),type:"button",onClick:c,children:[t&&Object(u.jsx)("span",{className:"material-icons-round",children:t}),n&&n]})});b.defaultProps={text:null,icon:null,onClick:function(){},disabled:!1};var d=b,j=(t(15),function(e){var n=e.label,t=e.value,a=e.setValue,r=e.placeholder,o=Object(c.useState)(!1),i=Object(l.a)(o,2),s=i[0],b=i[1],d=Object(c.useCallback)((function(e){a(e.target.value)})),j=Object(c.useCallback)((function(){b(!0)})),p=Object(c.useCallback)((function(){b(!1)}));return Object(u.jsxs)("div",{className:"text-input"+(s?" active":"")+(t?" filled":""),children:[Object(u.jsx)("label",{children:n}),Object(u.jsx)("input",{type:"text",value:t,onChange:d,placeholder:r,onFocus:j,onBlur:p,required:"required"})]})});j.defaultProps={label:null,value:null,placeholder:null};var p=j,m="menu",O="lobby_pregame",f="join_lobby_pregame",x="region_roulette",y="CLIENT_DATA",h=[{id:1,name:"Abruzzo",populations:1322247},{id:2,name:"Basilicata",populations:570365},{id:3,name:"Calabria",populations:1965128},{id:4,name:"Campania",populations:5839084},{id:5,name:"Emilia-Romagna",populations:4448841},{id:6,name:"Friuli-Venezia Giulia",populations:1217872},{id:7,name:"Lazio",populations:5898124},{id:8,name:"Liguria",populations:1565307},{id:9,name:"Lombardia",populations:10018806},{id:10,name:"Marche",populations:1538055},{id:11,name:"Molise",populations:310449},{id:12,name:"Piemonte",populations:4392526},{id:13,name:"Puglia",populations:4063888},{id:14,name:"Sardegna",populations:1653135},{id:15,name:"Sicilia",populations:5056641},{id:16,name:"Toscana",populations:3742437},{id:17,name:"Trentino-Alto Adige",populations:1062860},{id:18,name:"Umbria",populations:888908},{id:19,name:"Valle d'Aosta",populations:126883},{id:20,name:"Veneto",populations:4907529}],g=(t(16),function(e){var n=e.userName,t=e.changeUserName,a=e.changeClientScene,r=Object(c.useState)(n),o=Object(l.a)(r,2),i=o[0],s=o[1],b=Object(c.useCallback)((function(){t(i),a(O)}),[i]),j=Object(c.useCallback)((function(){t(i),a(f)}),[i]);return Object(u.jsxs)("div",{id:"menu",children:[Object(u.jsx)(p,{label:"Name",value:i,setValue:s}),Object(u.jsx)(d,{text:"Create campaign",icon:"add",onClick:b,disabled:0===i.length}),Object(u.jsx)(d,{text:"Join campaign",icon:"login",onClick:j,disabled:0===i.length})]})});g.defaultProps={};var v=g,C=(t(17),function(e){var n=e.clientData,t=e.gameData,c=e.changePlayerId,a=e.changeClientScene;return Object(u.jsxs)("div",{id:"pregame",children:[Object(u.jsxs)("div",{className:"lobby-key",children:["Lobby code:",Object(u.jsx)("span",{className:"selectable",children:n.currentLobbyKey})]}),Object(u.jsxs)("div",{className:"player blue",onClick:function(){return c("playerBlue")},children:[Object(u.jsx)("span",{className:"icon material-icons-outlined",children:(null===t||void 0===t?void 0:t.playerBlue_userName)?"face":"smart_toy"}),Object(u.jsx)("span",{children:(null===t||void 0===t?void 0:t.playerBlue_userName)||"Empty"})]}),Object(u.jsxs)("div",{className:"player red",onClick:function(){return c("playerRed")},children:[Object(u.jsx)("span",{className:"icon material-icons-outlined",children:(null===t||void 0===t?void 0:t.playerRed_userName)?"face":"smart_toy"}),Object(u.jsx)("span",{children:(null===t||void 0===t?void 0:t.playerRed_userName)||"Empty"})]}),Object(u.jsxs)("div",{className:"player green",onClick:function(){return c("playerGreen")},children:[Object(u.jsx)("span",{className:"icon material-icons-outlined",children:(null===t||void 0===t?void 0:t.playerGreen_userName)?"face":"smart_toy"}),Object(u.jsx)("span",{children:(null===t||void 0===t?void 0:t.playerGreen_userName)||"Empty"})]}),Object(u.jsxs)("div",{className:"player yellow",onClick:function(){return c("playerYellow")},children:[Object(u.jsx)("span",{className:"icon material-icons-outlined",children:(null===t||void 0===t?void 0:t.playerYellow_userName)?"face":"smart_toy"}),Object(u.jsx)("span",{children:(null===t||void 0===t?void 0:t.playerYellow_userName)||"Empty"})]}),Object(u.jsx)(d,{text:"Back",icon:"arrow_back",onClick:function(){return a(m)}}),Object(u.jsx)(d,{text:"Start",icon:"play_arrow",onClick:function(){}})]})});C.defaultProps={};var k=C,N=t(7),_=function(){for(var e=[],n="ABCDEFGHIJKLMNOPQRSTUVWXYZ",t=0;t<4;t++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")},S=t.n(N)()(["https://project-bg.herokuapp.com/gun"]),I=function(e,n){var t;S.get(e.currentLobbyKey).on((function(e,t,c,a){n(e)}),!0),t=e.currentLobbyKey,S.get(t).put(null),w(e)},w=function(e){if(e.playerId){var n={};n[e.playerId+"_userName"]=e.userName,n[e.playerId+"_clientScene"]=e.clientScene,n[e.playerId+"_cursorX"]=e.cursor.x,n[e.playerId+"_cursorY"]=e.cursor.y,n[e.playerId+"_cursorHide"]=e.cursor.hide,n[e.playerId+"_cursorText"]=e.cursor.text,S.get(e.currentLobbyKey).put(n,(function(e){}))}},L=(t(24),function(e){var n=e.changeCurrentLobbyKey,t=e.changeClientScene,a=Object(c.useState)(""),r=Object(l.a)(a,2),o=r[0],i=r[1],s=Object(c.useCallback)((function(){n(o),t(O)}),[o]),b=Object(c.useCallback)((function(e){i(e.toUpperCase())}),[]);return Object(u.jsxs)("div",{id:"join_pregame",children:[Object(u.jsx)(p,{label:"Lobby code",value:o,setValue:b}),Object(u.jsx)(d,{text:"Back",icon:"arrow_back",onClick:function(){return t(m)}}),Object(u.jsx)(d,{text:"Join campaign",icon:"login",onClick:s,disabled:4!==o.length})]})});L.defaultProps={};var D=L,P=(t(25),function(e){var n=e.changeClientScene,t=e.gameData,a=(e.changeGameData,Object(c.useMemo)((function(){var e=t.regions_played.map((function(e){return e.id})),n=Object.keys(h).map((function(n){return e.includes(h[n].id)?null:h[n].id})).filter((function(e){return e})),c=n[Math.floor(Math.random()*n.length)];return h.filter((function(e){return e.id===c}))[0]}),[t]));return Object(u.jsxs)("div",{id:"region-roulette",children:[Object(u.jsxs)("div",{className:"choosen-region",children:[Object(u.jsx)("label",{children:"Name:"}),Object(u.jsx)("span",{children:a.name}),Object(u.jsx)("label",{children:"Populations:"}),Object(u.jsx)("span",{children:a.populations.toString().replace(/\B(?=(\d{3})+(?!\d))/g,"'")})]}),Object(u.jsx)(d,{text:"Continue",icon:"play_arrow",onClick:function(){return n(x)}})]})});P.defaultProps={};var E=P,K=(t(26),function(e){var n=e.cursorData,t=e.changeCursorX,a=e.changeCursorY,r=e.changeCursorHide,o=e.changeCursorUp,l=e.changeCursorDown,i=Object(c.useMemo)((function(){return[n.hide?"hidden":null,n.mouseDown?"down":null,n.mouseUp?"up":null].filter((function(e){return!!e}))}),[n.hide,n.mouseDown,n.mouseUp]),s=Object(c.useCallback)((function(e){var n=e||window.event;t(n.x),a(n.y)}),[]),b=Object(c.useCallback)((function(){r(!1)}),[]),d=Object(c.useCallback)((function(){o(!1),r(!0)}),[]),j=Object(c.useCallback)((function(){o(!1),l(!0)}),[]),p=Object(c.useCallback)((function(){l(!1),o(!0)}),[]),m=Object(c.useCallback)((function(e){return e.preventDefault(),!1}),[]);return Object(c.useEffect)((function(){document.onmousemove=s,document.onmouseenter=b,document.onmouseleave=d,document.onmousedown=j,document.onmouseup=p,document.oncontextmenu=m})),Object(u.jsxs)("div",{id:"cursor",className:i,style:{transform:"translate("+n.x+"px, "+n.y+"px)"},children:[Object(u.jsx)("div",{className:"cursor"}),Object(u.jsx)("div",{className:"text",children:n.text})]})});K.defaultProps={};var U=K,M=(t(27),function(){var e=Object(c.useState)((function(){var e=localStorage.getItem(y);if(null!==e)return JSON.parse(e);var n={deviceId:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=16*Math.random()|0;return("x"==e?n:3&n|8).toString(16)})),clientScene:m,userName:"",currentLobbyKey:_(),playerId:null,cursor:{x:0,y:0,mouseUp:!1,mouseDown:!1,hide:!0,text:""}};return localStorage.setItem(y,JSON.stringify(n)),n})),n=Object(l.a)(e,2),t=n[0],a=n[1];Object(c.useEffect)((function(){w(t),localStorage.setItem(y,JSON.stringify(t))}),[t]);var r=Object(c.useCallback)((function(e){a((function(n){return Object(o.a)(Object(o.a)({},n),{},{clientScene:e})}))}),[]),i=Object(c.useCallback)((function(e){a((function(n){return Object(o.a)(Object(o.a)({},n),{},{userName:e})}))}),[]),b=Object(c.useCallback)((function(e){a((function(n){var t;return t=n.currentLobbyKey,S.get(t).off(),Object(o.a)(Object(o.a)({},n),{},{currentLobbyKey:e})}))}),[]),d=Object(c.useCallback)((function(e){a((function(n){return function(e){var n={};n[e.playerId+"_userName"]=null,n[e.playerId+"_clientScene"]=null,n[e.playerId+"_cursorX"]=null,n[e.playerId+"_cursorY"]=null,n[e.playerId+"_cursorHide"]=null,n[e.playerId+"_cursorText"]=null,S.get(e.currentLobbyKey).put(n,(function(e){}))}(n),Object(o.a)(Object(o.a)({},n),{},{playerId:e})}))}),[]),j=Object(c.useCallback)((function(e){a((function(n){return Object(o.a)(Object(o.a)({},n),{},{cursor:Object(o.a)(Object(o.a)({},n.cursor),{},{x:e})})}))}),[]),p=Object(c.useCallback)((function(e){a((function(n){return Object(o.a)(Object(o.a)({},n),{},{cursor:Object(o.a)(Object(o.a)({},n.cursor),{},{y:e})})}))}),[]),h=Object(c.useCallback)((function(e){a((function(n){return Object(o.a)(Object(o.a)({},n),{},{cursor:Object(o.a)(Object(o.a)({},n.cursor),{},{mouseUp:e})})}))}),[]),g=Object(c.useCallback)((function(e){a((function(n){return Object(o.a)(Object(o.a)({},n),{},{cursor:Object(o.a)(Object(o.a)({},n.cursor),{},{mouseDown:e})})}))}),[]),C=Object(c.useCallback)((function(e){a((function(n){return Object(o.a)(Object(o.a)({},n),{},{cursor:Object(o.a)(Object(o.a)({},n.cursor),{},{hide:e})})}))}),[]),N=Object(c.useState)(null),L=Object(l.a)(N,2),P=L[0],K=L[1];return Object(c.useEffect)((function(){null!==t.currentLobbyKey&&""!==t.currentLobbyKey&&I(t,K)}),[t.currentLobbyKey]),Object(c.useEffect)((function(){console.log("gameData changed: ",Object(o.a)({},P))}),[P]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(s,{}),m===t.clientScene&&Object(u.jsx)(v,{userName:t.userName,changeUserName:i,changeClientScene:r}),O===t.clientScene&&Object(u.jsx)(k,{clientData:t,gameData:P,changePlayerId:d,changeClientScene:r}),f===t.clientScene&&Object(u.jsx)(D,{changeCurrentLobbyKey:b,changeClientScene:r}),x===t.clientScene&&Object(u.jsx)(E,{changeClientScene:r}),t.cursor&&Object(u.jsx)(U,{cursorData:t.cursor,changeCursorX:j,changeCursorY:p,changeCursorUp:h,changeCursorDown:g,changeCursorHide:C})]})});r.a.render(Object(u.jsx)(M,{}),document.getElementById("app"))}],[[28,1,2]]]);
//# sourceMappingURL=main.3b1eedf2.chunk.js.map