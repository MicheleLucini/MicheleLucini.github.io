(this["webpackJsonpproject-bg"]=this["webpackJsonpproject-bg"]||[]).push([[0],[,,,,,,function(e,n,t){},,,,,,,function(e,n,t){},,function(e,n,t){},function(e,n,t){},function(e,n,t){},,,,,,function(e,n){function t(e){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}t.keys=function(){return[]},t.resolve=t,e.exports=t,t.id=23},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){"use strict";t.r(n);var c=t(1),a=t(7),r=t.n(a),o=t(2),l=t(3),u=(t(13),t(0)),i=function(e){e.gamePhase;return Object(u.jsx)("div",{id:"bg",children:Object(u.jsx)("div",{className:"noise"})})};i.defaultProps={gamePhase:null};var s=i,d=(t(15),function(e){var n=e.text,t=e.icon,c=e.onClick,a=e.disabled;return Object(u.jsxs)("button",{className:"simple-button"+(a?" disabled":""),type:"button",onClick:c,children:[t&&Object(u.jsx)("span",{className:"material-icons-round",children:t}),n&&n]})});d.defaultProps={text:null,icon:null,onClick:function(){},disabled:!1};var b=d,j=(t(16),function(e){var n=e.label,t=e.value,a=e.setValue,r=e.placeholder,o=Object(c.useState)(!1),i=Object(l.a)(o,2),s=i[0],d=i[1],b=Object(c.useCallback)((function(e){a(e.target.value)})),j=Object(c.useCallback)((function(){d(!0)})),p=Object(c.useCallback)((function(){d(!1)}));return Object(u.jsxs)("div",{className:"text-input"+(s?" active":"")+(t?" filled":""),children:[Object(u.jsx)("label",{children:n}),Object(u.jsx)("input",{type:"text",value:t,onChange:b,placeholder:r,onFocus:j,onBlur:p,required:"required"})]})});j.defaultProps={label:null,value:null,placeholder:null};var p=j,O="menu",m="lobby_pregame",f="join_lobby_pregame",x="region_roulette",y="CLIENT_DATA",g=[{id:1,name:"Abruzzo",populations:1322247},{id:2,name:"Basilicata",populations:570365},{id:3,name:"Calabria",populations:1965128},{id:4,name:"Campania",populations:5839084},{id:5,name:"Emilia-Romagna",populations:4448841},{id:6,name:"Friuli-Venezia Giulia",populations:1217872},{id:7,name:"Lazio",populations:5898124},{id:8,name:"Liguria",populations:1565307},{id:9,name:"Lombardia",populations:10018806},{id:10,name:"Marche",populations:1538055},{id:11,name:"Molise",populations:310449},{id:12,name:"Piemonte",populations:4392526},{id:13,name:"Puglia",populations:4063888},{id:14,name:"Sardegna",populations:1653135},{id:15,name:"Sicilia",populations:5056641},{id:16,name:"Toscana",populations:3742437},{id:17,name:"Trentino-Alto Adige",populations:1062860},{id:18,name:"Umbria",populations:888908},{id:19,name:"Valle d'Aosta",populations:126883},{id:20,name:"Veneto",populations:4907529}],h=(t(17),function(e){var n=e.userName,t=e.changeUserName,a=e.changeClientScene,r=Object(c.useState)(n),o=Object(l.a)(r,2),i=o[0],s=o[1],d=Object(c.useCallback)((function(){t(i),a(m)}),[i]),j=Object(c.useCallback)((function(){t(i),a(f)}),[i]);return Object(u.jsxs)("div",{id:"menu",children:[Object(u.jsx)(p,{label:"Name",value:i,setValue:s}),Object(u.jsx)(b,{text:"Create campaign",icon:"add",onClick:d,disabled:0===i.length}),Object(u.jsx)(b,{text:"Join campaign",icon:"login",onClick:j,disabled:0===i.length})]})});h.defaultProps={};var v=h,C=(t(6),function(e){var n=e.color,t=e.playerId,a=e.userName,r=e.itsAMe,o=e.changePlayerId,l=(Object(c.useMemo)((function(){return["player",n]}),[n]),Object(c.useMemo)((function(){return a?r?a+" (you)":a:"Player "+n+" (bot)"}),[a,n,r])),i=Object(c.useCallback)((function(){a||o(t)}),[a,t]);return Object(u.jsxs)("div",{className:"player "+n,onClick:i,children:[a?Object(u.jsx)("span",{className:"icon material-icons-round",children:"face"}):Object(u.jsx)("span",{className:"icon material-icons-outlined",children:"smart_toy"}),Object(u.jsx)("span",{children:l})]})});C.defaultProps={};var I=C,k=function(e){var n=e.clientData,t=e.gameData,c=e.changePlayerId,a=e.changeClientScene;return Object(u.jsxs)("div",{id:"pregame",children:[Object(u.jsxs)("div",{className:"lobby-key",children:["Lobby code:",Object(u.jsx)("span",{className:"selectable",children:n.currentLobbyKey})]}),Object(u.jsx)(I,{color:"blue",playerId:"playerBlue",userName:null===t||void 0===t?void 0:t.playerBlue_userName,itsAMe:(null===t||void 0===t?void 0:t.playerBlue_deviceId)===n.deviceId,changePlayerId:c}),Object(u.jsx)(I,{color:"red",playerId:"playerRed",userName:null===t||void 0===t?void 0:t.playerRed_userName,itsAMe:(null===t||void 0===t?void 0:t.playerRed_deviceId)===n.deviceId,changePlayerId:c}),Object(u.jsx)(I,{color:"green",playerId:"playerGreen",userName:null===t||void 0===t?void 0:t.playerGreen_userName,itsAMe:(null===t||void 0===t?void 0:t.playerGreen_deviceId)===n.deviceId,changePlayerId:c}),Object(u.jsx)(I,{color:"yellow",playerId:"playerYellow",userName:null===t||void 0===t?void 0:t.playerYellow_userName,itsAMe:(null===t||void 0===t?void 0:t.playerYellow_deviceId)===n.deviceId,changePlayerId:c}),Object(u.jsx)(b,{text:"Back",icon:"arrow_back",onClick:function(){return a(O)}}),Object(u.jsx)(b,{text:"Start",icon:"play_arrow",onClick:function(){}})]})};k.defaultProps={};var N=k,_=t(8),S=function(){for(var e=[],n="ABCDEFGHIJKLMNOPQRSTUVWXYZ",t=0;t<4;t++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")},P=t.n(_)()(["https://project-bg.herokuapp.com/gun"]),w=function(e,n){var t;P.get(e.currentLobbyKey).on((function(e,t,c,a){n(e)}),!0),t=e.currentLobbyKey,P.get(t).put(null),L(e)},L=function(e){if(e.playerId){var n={};n[e.playerId+"_deviceId"]=e.deviceId,n[e.playerId+"_userName"]=e.userName,n[e.playerId+"_clientScene"]=e.clientScene,n[e.playerId+"_cursorX"]=e.cursor.x,n[e.playerId+"_cursorY"]=e.cursor.y,n[e.playerId+"_cursorHide"]=e.cursor.hide,n[e.playerId+"_cursorText"]=e.cursor.text,P.get(e.currentLobbyKey).put(n,(function(e){}))}},D=(t(24),function(e){var n=e.changeCurrentLobbyKey,t=e.changeClientScene,a=Object(c.useState)(""),r=Object(l.a)(a,2),o=r[0],i=r[1],s=Object(c.useCallback)((function(){n(o),t(m)}),[o]),d=Object(c.useCallback)((function(e){i(e.toUpperCase())}),[]);return Object(u.jsxs)("div",{id:"join_pregame",children:[Object(u.jsx)(p,{label:"Lobby code",value:o,setValue:d}),Object(u.jsx)(b,{text:"Back",icon:"arrow_back",onClick:function(){return t(O)}}),Object(u.jsx)(b,{text:"Join campaign",icon:"login",onClick:s,disabled:4!==o.length})]})});D.defaultProps={};var M=D,K=(t(25),function(e){var n=e.changeClientScene,t=e.gameData,a=(e.changeGameData,Object(c.useMemo)((function(){var e=t.regions_played.map((function(e){return e.id})),n=Object.keys(g).map((function(n){return e.includes(g[n].id)?null:g[n].id})).filter((function(e){return e})),c=n[Math.floor(Math.random()*n.length)];return g.filter((function(e){return e.id===c}))[0]}),[t]));return Object(u.jsxs)("div",{id:"region-roulette",children:[Object(u.jsxs)("div",{className:"choosen-region",children:[Object(u.jsx)("label",{children:"Name:"}),Object(u.jsx)("span",{children:a.name}),Object(u.jsx)("label",{children:"Populations:"}),Object(u.jsx)("span",{children:a.populations.toString().replace(/\B(?=(\d{3})+(?!\d))/g,"'")})]}),Object(u.jsx)(b,{text:"Continue",icon:"play_arrow",onClick:function(){return n(x)}})]})});K.defaultProps={};var A=K,U=(t(26),function(e){var n=e.cursorData,t=e.changeCursorX,a=e.changeCursorY,r=e.changeCursorHide,o=e.changeCursorUp,l=e.changeCursorDown,i=Object(c.useMemo)((function(){return[n.hide?"hidden":null,n.mouseDown?"down":null,n.mouseUp?"up":null].filter((function(e){return!!e}))}),[n.hide,n.mouseDown,n.mouseUp]),s=Object(c.useCallback)((function(e){var n=e||window.event;t(n.x),a(n.y)}),[]),d=Object(c.useCallback)((function(){r(!1)}),[]),b=Object(c.useCallback)((function(){o(!1),r(!0)}),[]),j=Object(c.useCallback)((function(){o(!1),l(!0)}),[]),p=Object(c.useCallback)((function(){l(!1),o(!0)}),[]),O=Object(c.useCallback)((function(e){return e.preventDefault(),!1}),[]);return Object(c.useEffect)((function(){document.onmousemove=s,document.onmouseenter=d,document.onmouseleave=b,document.onmousedown=j,document.onmouseup=p,document.oncontextmenu=O})),Object(u.jsxs)("div",{id:"cursor",className:i,style:{transform:"translate("+n.x+"px, "+n.y+"px)"},children:[Object(u.jsx)("div",{className:"cursor"}),Object(u.jsx)("div",{className:"text",children:n.text})]})});U.defaultProps={};var B=U,E=(t(27),function(){var e=Object(c.useState)((function(){var e=localStorage.getItem(y);if(null!==e)return JSON.parse(e);var n={deviceId:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=16*Math.random()|0;return("x"==e?n:3&n|8).toString(16)})),clientScene:O,userName:"",currentLobbyKey:S(),playerId:null,cursor:{x:0,y:0,mouseUp:!1,mouseDown:!1,hide:!0,text:""}};return localStorage.setItem(y,JSON.stringify(n)),n})),n=Object(l.a)(e,2),t=n[0],a=n[1];Object(c.useEffect)((function(){L(t),localStorage.setItem(y,JSON.stringify(t))}),[t]);var r=Object(c.useCallback)((function(e){a((function(n){return Object(o.a)(Object(o.a)({},n),{},{clientScene:e})}))}),[]),i=Object(c.useCallback)((function(e){a((function(n){return Object(o.a)(Object(o.a)({},n),{},{userName:e})}))}),[]),d=Object(c.useCallback)((function(e){a((function(n){var t;return t=n.currentLobbyKey,P.get(t).off(),Object(o.a)(Object(o.a)({},n),{},{currentLobbyKey:e})}))}),[]),b=Object(c.useCallback)((function(e){a((function(n){return function(e){var n={};n[e.playerId+"_deviceId"]=null,n[e.playerId+"_userName"]=null,n[e.playerId+"_clientScene"]=null,n[e.playerId+"_cursorX"]=null,n[e.playerId+"_cursorY"]=null,n[e.playerId+"_cursorHide"]=null,n[e.playerId+"_cursorText"]=null,P.get(e.currentLobbyKey).put(n,(function(e){}))}(n),Object(o.a)(Object(o.a)({},n),{},{playerId:e})}))}),[]),j=Object(c.useCallback)((function(e){a((function(n){return Object(o.a)(Object(o.a)({},n),{},{cursor:Object(o.a)(Object(o.a)({},n.cursor),{},{x:e})})}))}),[]),p=Object(c.useCallback)((function(e){a((function(n){return Object(o.a)(Object(o.a)({},n),{},{cursor:Object(o.a)(Object(o.a)({},n.cursor),{},{y:e})})}))}),[]),g=Object(c.useCallback)((function(e){a((function(n){return Object(o.a)(Object(o.a)({},n),{},{cursor:Object(o.a)(Object(o.a)({},n.cursor),{},{mouseUp:e})})}))}),[]),h=Object(c.useCallback)((function(e){a((function(n){return Object(o.a)(Object(o.a)({},n),{},{cursor:Object(o.a)(Object(o.a)({},n.cursor),{},{mouseDown:e})})}))}),[]),C=Object(c.useCallback)((function(e){a((function(n){return Object(o.a)(Object(o.a)({},n),{},{cursor:Object(o.a)(Object(o.a)({},n.cursor),{},{hide:e})})}))}),[]),I=Object(c.useState)(null),k=Object(l.a)(I,2),_=k[0],D=k[1],K=Object(c.useCallback)((function(e){D((function(n){return Object(o.a)(Object(o.a)({},n),e)}))}),[]);return Object(c.useEffect)((function(){null!==t.currentLobbyKey&&""!==t.currentLobbyKey&&w(t,K)}),[t.currentLobbyKey]),Object(c.useEffect)((function(){console.log("gameData changed: ",Object(o.a)({},_))}),[_]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(s,{}),O===t.clientScene&&Object(u.jsx)(v,{userName:t.userName,changeUserName:i,changeClientScene:r}),m===t.clientScene&&Object(u.jsx)(N,{clientData:t,gameData:_,changePlayerId:b,changeClientScene:r}),f===t.clientScene&&Object(u.jsx)(M,{changeCurrentLobbyKey:d,changeClientScene:r}),x===t.clientScene&&Object(u.jsx)(A,{changeClientScene:r}),t.cursor&&Object(u.jsx)(B,{cursorData:t.cursor,changeCursorX:j,changeCursorY:p,changeCursorUp:g,changeCursorDown:h,changeCursorHide:C})]})});r.a.render(Object(u.jsx)(E,{}),document.getElementById("app"))}],[[28,1,2]]]);
//# sourceMappingURL=main.62a31fdc.chunk.js.map