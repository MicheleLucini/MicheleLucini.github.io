{"version":3,"sources":["../node_modules/gun sync","scenes/background/Background.jsx","scenes/background/index.js","components/button/Button.jsx","components/button/index.js","components/textInput/TextInput.jsx","components/textInput/index.js","logic/constants.js","logic/utility.js","logic/database.js","scenes/menu/Menu.jsx","scenes/menu/index.js","scenes/pregame/PlayerSlot.jsx","scenes/pregame/Pregame.jsx","scenes/pregame/index.js","scenes/joinPregame/JoinPregame.jsx","scenes/joinPregame/index.js","scenes/characterSelection/CharacterSelection.jsx","scenes/characterSelection/index.js","components/cursor/Cursor.jsx","components/cursor/CursorGhost.jsx","App.jsx","index.js"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","Background","gamePhase","className","defaultProps","Button","text","icon","onClick","disabled","type","TextInput","label","value","setValue","placeholder","onKeyPressEnter","useState","isActive","setIsActive","onChange","useCallback","target","onFocus","onBlur","onKeyPress","window","event","key","required","appVersion","CLIENT_SCENES","LSKEY","getRandomGameKey","result","characters","i","push","charAt","Math","floor","random","length","join","G","Gun","connected","deleteGame","get","put","downloadGame","once","requestedGame","console","log","subscribeGame","on","_msg","_ev","existsGame","Promise","isMyGame","clientData","creatorDeviceId","deviceId","gameIsDifferentVersion","joinGame","fnJoined","a","leaveGame","off","Menu","changeUserName","changeCurrentLobbyKey","changeClientScene","mergeGameData","resetGameData","userName","name","setName","onCreateCampaign","newGame","ack","createGame","onJoinCampaign","onContinueCampaign","currentLobbyKey","onLeaveCampaign","PlayerSlot","color","itsAMe","onSelectPlayer","customClass","useMemo","filter","x","spanText","Pregame","gameData","changePlayerId","onSelectPlayerSlot","playerId","newData","resetMyPlayer","playerBlue_userName","playerBlue_deviceId","playerRed_userName","playerRed_deviceId","playerGreen_userName","playerGreen_deviceId","playerYellow_userName","playerYellow_deviceId","JoinPregame","lobbyCode","setLobbyCode","customSetLobbyCode","toUpperCase","CharacterSelection","Cursor","cursorData","changeCursorX","changeCursorY","changeCursorHide","changeCursorUp","changeCursorDown","cursorColor","cursorClass","hide","mouseDown","mouseUp","handleMouseMove","y","handleMouseEnter","handleMouseLeave","handleMouseDown","handleMouseUp","handleContextMenu","preventDefault","useEffect","document","onmousemove","onmouseenter","onmouseleave","onmousedown","onmouseup","oncontextmenu","style","transform","CursorGhost","App","lsValue","JSON","parse","localStorage","getItem","clientScene","defaultValues","replace","c","r","toString","cursor","setClientData","myData","updateMyPlayer","setItem","stringify","newScene","prev","newUserName","newCurrentLobbyKey","newPlayerId","newValue","setGameData","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.f4033b3b.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 26;","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport \"./background.css\";\r\n\r\nconst Background = ({ gamePhase }) => {\r\n  return (\r\n    <div id=\"bg\">\r\n      <div className=\"noise\"></div>\r\n      {/* <div></div> */}\r\n    </div>\r\n  );\r\n};\r\n\r\nBackground.propTypes = {\r\n  gamePhase: PropTypes.string,\r\n};\r\n\r\nBackground.defaultProps = {\r\n  gamePhase: null,\r\n};\r\n\r\nexport default Background;\r\n","import Background from './Background';\r\n\r\nexport default Background;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport \"./button.css\";\r\n\r\nconst Button = ({ text, icon, onClick, disabled }) => {\r\n  return (\r\n    <button\r\n      className={\"simple-button\" + (disabled ? \" disabled\" : \"\")}\r\n      type=\"button\"\r\n      onClick={onClick}\r\n    >\r\n      {icon && <span className=\"material-icons-round\">{icon}</span>}\r\n      {text && text}\r\n    </button>\r\n  );\r\n};\r\n\r\nButton.propTypes = {\r\n  text: PropTypes.string,\r\n  icon: PropTypes.string,\r\n  onClick: PropTypes.func,\r\n  disabled: PropTypes.bool,\r\n};\r\n\r\nButton.defaultProps = {\r\n  text: null,\r\n  icon: null,\r\n  onClick: () => {},\r\n  disabled: false,\r\n};\r\n\r\nexport default Button;\r\n","import Button from './Button';\r\n\r\nexport default Button;\r\n","import React, { useCallback, useState } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport \"./textInput.css\";\r\n\r\nconst TextInput = ({\r\n  label,\r\n  value,\r\n  setValue,\r\n  placeholder,\r\n  onKeyPressEnter,\r\n}) => {\r\n  const [isActive, setIsActive] = useState(false);\r\n\r\n  const onChange = useCallback((e) => {\r\n    setValue(e.target.value);\r\n  });\r\n  const onFocus = useCallback(() => {\r\n    setIsActive(true);\r\n  });\r\n  const onBlur = useCallback(() => {\r\n    setIsActive(false);\r\n  });\r\n  const onKeyPress = useCallback((e) => {\r\n    if (!e) e = window.event;\r\n    var keyCode = e.code || e.key;\r\n    if (keyCode === \"Enter\" && onKeyPressEnter) {\r\n      onKeyPressEnter();\r\n      return false;\r\n    }\r\n  });\r\n\r\n  return (\r\n    <div\r\n      className={\r\n        \"text-input\" + (isActive ? \" active\" : \"\") + (!!value ? \" filled\" : \"\")\r\n      }\r\n    >\r\n      <label>{label}</label>\r\n      <input\r\n        type=\"text\"\r\n        value={value}\r\n        onChange={onChange}\r\n        // validate={validate}\r\n        placeholder={placeholder}\r\n        onFocus={onFocus}\r\n        onBlur={onBlur}\r\n        required=\"required\"\r\n        onKeyPress={onKeyPress}\r\n      />\r\n      {/* <p>// place for errors</p> */}\r\n    </div>\r\n  );\r\n};\r\n\r\nTextInput.propTypes = {\r\n  label: PropTypes.string,\r\n  value: PropTypes.string,\r\n  setValue: PropTypes.func.isRequired,\r\n  // validate: PropTypes.func,\r\n  placeholder: PropTypes.string,\r\n  onKeyPressEnter: PropTypes.func,\r\n};\r\n\r\nTextInput.defaultProps = {\r\n  label: null,\r\n  value: null,\r\n  // validate: () => {},\r\n  placeholder: null,\r\n  onKeyPressEnter: null,\r\n};\r\n\r\nexport default TextInput;\r\n","import TextInput from './TextInput';\r\n\r\nexport default TextInput;\r\n","export const appVersion = \"0.0.4\";\r\n\r\nexport const CLIENT_SCENES = {\r\n  MENU: \"menu\",\r\n  LOBBY_PREGAME: \"lobby_pregame\",\r\n  JOIN_LOBBY_PREGAME: \"join_lobby_pregame\",\r\n  CHARACTER_SELECTION: \"character_selection\",\r\n};\r\n\r\nexport const LSKEY = {\r\n  CLIENT_DATA: \"CLIENT_DATA\",\r\n};\r\n","export const uuidv4 = () => {\r\n  return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function (c) {\r\n    var r = (Math.random() * 16) | 0,\r\n      v = c == \"x\" ? r : (r & 0x3) | 0x8;\r\n    return v.toString(16);\r\n  });\r\n};\r\n\r\nexport const getRandomGameKey = () => {\r\n  var result = [];\r\n  var characters = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\r\n  for (var i = 0; i < 4; i++) {\r\n    result.push(\r\n      characters.charAt(Math.floor(Math.random() * characters.length))\r\n    );\r\n  }\r\n  return result.join(\"\");\r\n};\r\n","import Gun from \"gun\";\r\nimport { getRandomGameKey } from \"./utility\";\r\nimport { appVersion, CLIENT_SCENES } from \"./constants\";\r\n\r\nconst G = Gun([\"https://project-bg.herokuapp.com/gun\"]);\r\nlet connected = false;\r\n\r\n/* Base game ops */\r\n\r\nexport const createGame = (clientData) => {\r\n  const newGame = {\r\n    key: getRandomGameKey(),\r\n    appVersion: appVersion,\r\n    creatorDeviceId: clientData.deviceId,\r\n  };\r\n\r\n  G.get(newGame.key).put(newGame, (ack) => console.log(\"Created game: \", ack));\r\n\r\n  return newGame;\r\n};\r\n\r\nconst deleteGame = (key) => {\r\n  G.get(key).put({ key: null });\r\n};\r\n\r\nconst downloadGame = (key, onChange) => {\r\n  G.get(key).once((requestedGame) => {\r\n    console.log(\"Game downloaded: \", requestedGame);\r\n    onChange(requestedGame);\r\n  });\r\n};\r\n\r\nconst subscribeGame = (key, onChange) => {\r\n  G.get(key).on((value, key, _msg, _ev) => {\r\n    // console.log({ value });\r\n    // console.log({ key });\r\n    // console.log({ _msg });\r\n    // console.log({ _ev });\r\n    onChange(value);\r\n  }, true);\r\n};\r\n\r\nconst existsGame = (key) => {\r\n  return new Promise((resolve) => {\r\n    G.get(key).once((requestedGame) => {\r\n      if (requestedGame?.key) {\r\n        console.log(\"The game \" + key + \" exists: \", requestedGame);\r\n        resolve(true);\r\n      } else {\r\n        console.log(\"The game \" + key + \" doesn't exists: \", requestedGame);\r\n        resolve(false);\r\n      }\r\n    });\r\n  });\r\n};\r\n\r\nconst isMyGame = (key, clientData) => {\r\n  return new Promise((resolve) => {\r\n    G.get(key).once((requestedGame) => {\r\n      if (requestedGame?.creatorDeviceId === clientData.deviceId) {\r\n        console.log(\"The game \" + key + \" is mine: \", requestedGame);\r\n        resolve(true);\r\n      } else {\r\n        console.log(\"The game \" + key + \" is not mine: \", requestedGame);\r\n        resolve(false);\r\n      }\r\n    });\r\n  });\r\n};\r\n\r\nconst gameIsDifferentVersion = (key) => {\r\n  return new Promise((resolve) => {\r\n    G.get(key).once((requestedGame) => {\r\n      if (requestedGame?.appVersion !== appVersion) {\r\n        console.log(\r\n          \"The game \" + key + \" is of a compatible version: \",\r\n          requestedGame\r\n        );\r\n        resolve(true);\r\n      } else {\r\n        console.log(\r\n          \"The game \" + key + \" is of an incompatible version: \",\r\n          requestedGame\r\n        );\r\n        resolve(false);\r\n      }\r\n    });\r\n  });\r\n};\r\n\r\n/* Complex game ops */\r\n\r\nexport const joinGame = async (key, clientData, onChange, fnJoined) => {\r\n  if (connected) leaveGame(connected, clientData);\r\n  console.log(\"Joining game: \", key);\r\n  if (!key || key.length !== 4) return false;\r\n\r\n  const gameExists = await existsGame(key);\r\n\r\n  if (gameExists) {\r\n    const gameDifferentVersion = await gameIsDifferentVersion(key);\r\n\r\n    if (gameDifferentVersion) {\r\n      // Se il game è il mio lo elimino\r\n      const gameIsMine = await isMyGame(key, clientData);\r\n      if (gameIsMine) deleteGame(key);\r\n      return false;\r\n    }\r\n\r\n    downloadGame(key, onChange);\r\n    subscribeGame(key, onChange);\r\n    connected = key;\r\n    fnJoined();\r\n  }\r\n};\r\n\r\nexport const leaveGame = async (key, clientData) => {\r\n  if (!key) return;\r\n  console.log(\"Leaving game: \", key);\r\n  G.get(key).off();\r\n  connected = null;\r\n  // Se il game è il mio lo elimino\r\n  const gameIsMine = await isMyGame(key, clientData);\r\n  if (gameIsMine) deleteGame(key);\r\n};\r\n\r\n/* Gestione player */\r\n\r\nexport const updateMyPlayer = (clientData) => {\r\n  if (!connected || !clientData.playerId) return;\r\n\r\n  let myData = {};\r\n  myData[clientData.playerId + \"_deviceId\"] = clientData.deviceId;\r\n  myData[clientData.playerId + \"_userName\"] = clientData.userName;\r\n  myData[clientData.playerId + \"_clientScene\"] = clientData.clientScene;\r\n\r\n  if (clientData.clientScene === CLIENT_SCENES.CHARACTER_SELECTION) {\r\n    myData[clientData.playerId + \"_cursorX\"] = clientData.cursor.x;\r\n    myData[clientData.playerId + \"_cursorY\"] = clientData.cursor.y;\r\n    myData[clientData.playerId + \"_cursorHide\"] = clientData.cursor.hide;\r\n    myData[clientData.playerId + \"_cursorText\"] = clientData.cursor.text;\r\n  }\r\n\r\n  G.get(connected).put(myData);\r\n};\r\n\r\nexport const resetMyPlayer = (clientData) => {\r\n  if (!connected || !clientData.playerId) return;\r\n\r\n  let newData = {};\r\n  newData[clientData.playerId + \"_deviceId\"] = null;\r\n  newData[clientData.playerId + \"_userName\"] = null;\r\n  newData[clientData.playerId + \"_clientScene\"] = null;\r\n  newData[clientData.playerId + \"_cursorX\"] = null;\r\n  newData[clientData.playerId + \"_cursorY\"] = null;\r\n  newData[clientData.playerId + \"_cursorHide\"] = null;\r\n  newData[clientData.playerId + \"_cursorText\"] = null;\r\n\r\n  G.get(connected).put(newData);\r\n};\r\n","import React, { useState, useCallback } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport Button from \"../../components/button\";\r\nimport TextInput from \"../../components/textInput\";\r\n\r\nimport { CLIENT_SCENES, appVersion } from \"../../logic/constants\";\r\nimport { leaveGame, createGame, joinGame } from \"../../logic/database\";\r\n\r\nimport \"./menu.css\";\r\n\r\nconst Menu = ({\r\n  clientData,\r\n  changeUserName,\r\n  changeCurrentLobbyKey,\r\n  changeClientScene,\r\n  mergeGameData,\r\n  resetGameData,\r\n}) => {\r\n  const [name, setName] = useState(clientData.userName);\r\n\r\n  const onCreateCampaign = useCallback(() => {\r\n    changeUserName(name);\r\n    const newGame = createGame(clientData);\r\n    joinGame(newGame.key, clientData, mergeGameData, () => {\r\n      changeCurrentLobbyKey(newGame.key);\r\n      changeClientScene(CLIENT_SCENES.LOBBY_PREGAME);\r\n    });\r\n  }, [name, clientData, mergeGameData]);\r\n\r\n  const onJoinCampaign = useCallback(() => {\r\n    changeUserName(name);\r\n    changeClientScene(CLIENT_SCENES.JOIN_LOBBY_PREGAME);\r\n  }, [name]);\r\n\r\n  const onContinueCampaign = useCallback(() => {\r\n    changeUserName(name);\r\n    joinGame(clientData.currentLobbyKey, clientData, mergeGameData, () => {\r\n      changeClientScene(CLIENT_SCENES.LOBBY_PREGAME);\r\n    });\r\n  }, [name, clientData, mergeGameData]);\r\n\r\n  const onLeaveCampaign = useCallback(() => {\r\n    leaveGame(clientData.currentLobbyKey, clientData);\r\n    changeCurrentLobbyKey(null);\r\n    resetGameData();\r\n  }, [clientData]);\r\n\r\n  return (\r\n    <div id=\"menu\">\r\n      <TextInput label=\"Name\" value={name} setValue={setName} />\r\n      {clientData.currentLobbyKey && (\r\n        <>\r\n          <Button\r\n            text={\"Continue campaign \" + clientData.currentLobbyKey}\r\n            icon=\"navigate_next\"\r\n            onClick={onContinueCampaign}\r\n          />\r\n          <Button\r\n            text={\"Leave campaign \" + clientData.currentLobbyKey}\r\n            icon=\"logout\"\r\n            onClick={onLeaveCampaign}\r\n          />\r\n        </>\r\n      )}\r\n      {!clientData.currentLobbyKey && (\r\n        <>\r\n          <Button\r\n            text=\"Create campaign\"\r\n            icon=\"add\"\r\n            onClick={onCreateCampaign}\r\n            disabled={name.length === 0}\r\n          />\r\n          <Button\r\n            text=\"Join campaign\"\r\n            icon=\"login\"\r\n            onClick={onJoinCampaign}\r\n            disabled={name.length === 0}\r\n          />\r\n        </>\r\n      )}\r\n      <span className=\"version\">{appVersion}</span>\r\n    </div>\r\n  );\r\n};\r\n\r\nMenu.propTypes = {\r\n  clientData: PropTypes.object.isRequired,\r\n  changeUserName: PropTypes.func.isRequired,\r\n  changeCurrentLobbyKey: PropTypes.func.isRequired,\r\n  changeClientScene: PropTypes.func.isRequired,\r\n  mergeGameData: PropTypes.func.isRequired,\r\n  resetGameData: PropTypes.func.isRequired,\r\n};\r\n\r\nMenu.defaultProps = {};\r\n\r\nexport default Menu;\r\n","import Menu from './Menu';\r\n\r\nexport default Menu;\r\n","import React, { useMemo, useCallback } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport \"./pregame.css\";\r\n\r\nconst PlayerSlot = ({ color, userName, itsAMe, onSelectPlayer }) => {\r\n  const customClass = useMemo(\r\n    () =>\r\n      [\"player\", color, userName ? null : \"locked\"]\r\n        .filter((x) => !!x)\r\n        .join(\" \"),\r\n    [color, userName]\r\n  );\r\n\r\n  const spanText = useMemo(() => {\r\n    if (!userName) return \"Player \" + color + \" (bot)\";\r\n    if (itsAMe) return userName + \" (you)\";\r\n    return userName;\r\n  }, [userName, color, itsAMe]);\r\n\r\n  return (\r\n    <div className={customClass} onClick={onSelectPlayer}>\r\n      {userName ? (\r\n        <span className=\"icon material-icons-round\">face</span>\r\n      ) : (\r\n        <span className=\"icon material-icons-outlined\">smart_toy</span>\r\n      )}\r\n      <span>{spanText}</span>\r\n    </div>\r\n  );\r\n};\r\n\r\nPlayerSlot.propTypes = {\r\n  color: PropTypes.oneOf([\"blue\", \"red\", \"green\", \"yellow\"]).isRequired,\r\n  userName: PropTypes.string,\r\n  itsAMe: PropTypes.bool.isRequired,\r\n  onSelectPlayer: PropTypes.func.isRequired,\r\n};\r\n\r\nPlayerSlot.defaultProps = {\r\n  userName: null,\r\n};\r\n\r\nexport default PlayerSlot;\r\n","import React, { useCallback } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport Button from \"../../components/button\";\r\nimport PlayerSlot from \"./PlayerSlot\";\r\n\r\nimport { resetMyPlayer } from \"../../logic/database\";\r\nimport { CLIENT_SCENES } from \"../../logic/constants\";\r\n\r\nimport \"./pregame.css\";\r\n\r\nconst Pregame = ({\r\n  clientData,\r\n  gameData,\r\n  changePlayerId,\r\n  changeClientScene,\r\n}) => {\r\n  const onSelectPlayerSlot = useCallback(\r\n    (playerId) => {\r\n      // Se non è già occupato\r\n      if (gameData[playerId + \"_deviceId\"]) return;\r\n      // Libero il posto\r\n      resetMyPlayer(clientData);\r\n      // Occupo il nuovo\r\n      changePlayerId(playerId);\r\n    },\r\n    [clientData]\r\n  );\r\n\r\n  return (\r\n    <div id=\"pregame\">\r\n      <div className=\"lobby-key\">\r\n        Lobby code:\r\n        <span className=\"selectable\">{clientData.currentLobbyKey}</span>\r\n      </div>\r\n      <PlayerSlot\r\n        color=\"blue\"\r\n        userName={gameData?.playerBlue_userName}\r\n        itsAMe={gameData?.playerBlue_deviceId === clientData.deviceId}\r\n        onSelectPlayer={() => onSelectPlayerSlot(\"playerBlue\")}\r\n      />\r\n      <PlayerSlot\r\n        color=\"red\"\r\n        userName={gameData?.playerRed_userName}\r\n        itsAMe={gameData?.playerRed_deviceId === clientData.deviceId}\r\n        onSelectPlayer={() => onSelectPlayerSlot(\"playerRed\")}\r\n      />\r\n      <PlayerSlot\r\n        color=\"green\"\r\n        userName={gameData?.playerGreen_userName}\r\n        itsAMe={gameData?.playerGreen_deviceId === clientData.deviceId}\r\n        onSelectPlayer={() => onSelectPlayerSlot(\"playerGreen\")}\r\n      />\r\n      <PlayerSlot\r\n        color=\"yellow\"\r\n        userName={gameData?.playerYellow_userName}\r\n        itsAMe={gameData?.playerYellow_deviceId === clientData.deviceId}\r\n        onSelectPlayer={() => onSelectPlayerSlot(\"playerYellow\")}\r\n      />\r\n      <Button\r\n        text=\"Back\"\r\n        icon=\"arrow_back\"\r\n        onClick={() => changeClientScene(CLIENT_SCENES.MENU)}\r\n      />\r\n      <Button\r\n        text=\"Start\"\r\n        icon=\"play_arrow\"\r\n        onClick={() => changeClientScene(CLIENT_SCENES.CHARACTER_SELECTION)}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nPregame.propTypes = {\r\n  clientData: PropTypes.object.isRequired,\r\n  gameData: PropTypes.object,\r\n  changePlayerId: PropTypes.func.isRequired,\r\n  changeClientScene: PropTypes.func.isRequired,\r\n};\r\n\r\nPregame.defaultProps = {\r\n  gameData: null,\r\n};\r\n\r\nexport default Pregame;\r\n","import Pregame from './Pregame';\r\n\r\nexport default Pregame;\r\n","import React, { useState, useCallback } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport Button from \"../../components/button\";\r\nimport TextInput from \"../../components/textInput\";\r\n\r\nimport { CLIENT_SCENES, LSKEY } from \"../../logic/constants\";\r\nimport { joinGame } from \"../../logic/database\";\r\n\r\nimport \"./joinPregame.css\";\r\n\r\nconst JoinPregame = ({\r\n  clientData,\r\n  changeCurrentLobbyKey,\r\n  changeClientScene,\r\n  mergeGameData,\r\n}) => {\r\n  const [lobbyCode, setLobbyCode] = useState(\"\");\r\n\r\n  const onJoinCampaign = useCallback(() => {\r\n    joinGame(lobbyCode, clientData, mergeGameData, () => {\r\n      changeCurrentLobbyKey(lobbyCode);\r\n      changeClientScene(CLIENT_SCENES.LOBBY_PREGAME);\r\n    });\r\n  }, [lobbyCode, clientData, mergeGameData]);\r\n\r\n  const customSetLobbyCode = useCallback((value) => {\r\n    setLobbyCode(value.toUpperCase());\r\n  }, []);\r\n\r\n  return (\r\n    <div id=\"join_pregame\">\r\n      <TextInput\r\n        label=\"Lobby code\"\r\n        value={lobbyCode}\r\n        setValue={customSetLobbyCode}\r\n        onKeyPressEnter={onJoinCampaign}\r\n      />\r\n      <Button\r\n        text=\"Back\"\r\n        icon=\"arrow_back\"\r\n        onClick={() => changeClientScene(CLIENT_SCENES.MENU)}\r\n      ></Button>\r\n      <Button\r\n        text=\"Join campaign\"\r\n        icon=\"login\"\r\n        onClick={onJoinCampaign}\r\n        disabled={lobbyCode.length !== 4}\r\n      ></Button>\r\n    </div>\r\n  );\r\n};\r\n\r\nJoinPregame.propTypes = {\r\n  clientData: PropTypes.object.isRequired,\r\n  changeCurrentLobbyKey: PropTypes.func.isRequired,\r\n  changeClientScene: PropTypes.func.isRequired,\r\n  mergeGameData: PropTypes.func.isRequired,\r\n};\r\n\r\nJoinPregame.defaultProps = {};\r\n\r\nexport default JoinPregame;\r\n","import JoinPregame from './JoinPregame';\r\n\r\nexport default JoinPregame;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport Button from \"../../components/button\";\r\nimport { CLIENT_SCENES } from \"../../logic/constants\";\r\n\r\nimport \"./characterSelection.css\";\r\n\r\nconst CharacterSelection = ({ changeClientScene }) => {\r\n  return (\r\n    <div id=\"character_selection\">\r\n      <div></div>\r\n      <div></div>\r\n      <div></div>\r\n      <div></div>\r\n      <Button\r\n        text=\"Back\"\r\n        icon=\"arrow_back\"\r\n        onClick={() => changeClientScene(CLIENT_SCENES.LOBBY_PREGAME)}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nCharacterSelection.propTypes = {\r\n  changeClientScene: PropTypes.func.isRequired,\r\n};\r\n\r\nCharacterSelection.defaultProps = {};\r\n\r\nexport default CharacterSelection;\r\n","import CharacterSelection from './CharacterSelection';\r\n\r\nexport default CharacterSelection;\r\n","import React, { useMemo, useCallback, useEffect, useState } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport \"./cursor.css\";\r\n\r\nconst Cursor = ({\r\n  playerId,\r\n  cursorData,\r\n  changeCursorX,\r\n  changeCursorY,\r\n  changeCursorHide,\r\n  changeCursorUp,\r\n  changeCursorDown,\r\n}) => {\r\n  // const [hide, setHide] = useState(true);\r\n  // const [mouseDown, setMouseDown] = useState(false);\r\n  // const [mouseUp, setMouseUp] = useState(false);\r\n  // const [x, setX] = useState(0);\r\n  // const [y, setY] = useState(0);\r\n\r\n  const cursorColor = useMemo(() => {\r\n    switch (playerId) {\r\n      case \"playerBlue\":\r\n        return \"blue\";\r\n        break;\r\n      case \"playerRed\":\r\n        return \"red\";\r\n        break;\r\n      case \"playerGreen\":\r\n        return \"green\";\r\n        break;\r\n      case \"playerYellow\":\r\n        return \"yellow\";\r\n        break;\r\n      default:\r\n        return null;\r\n        break;\r\n    }\r\n  }, [playerId]);\r\n\r\n  const cursorClass = useMemo(\r\n    () =>\r\n      [\r\n        \"cursor\",\r\n        cursorData.hide ? \"hidden\" : null,\r\n        cursorData.mouseDown ? \"down\" : null,\r\n        cursorData.mouseUp ? \"up\" : null,\r\n        cursorColor,\r\n      ]\r\n        .filter((x) => !!x)\r\n        .join(\" \"),\r\n    [cursorColor, cursorData.hide, cursorData.mouseDown, cursorData.mouseUp]\r\n  );\r\n\r\n  const handleMouseMove = useCallback((event) => {\r\n    const e = event || window.event;\r\n    changeCursorX(e.x);\r\n    changeCursorY(e.y);\r\n    // setX(e.x);\r\n    // setY(e.y);\r\n  }, []);\r\n\r\n  const handleMouseEnter = useCallback(() => {\r\n    changeCursorHide(false);\r\n    // setHide(false);\r\n  }, []);\r\n\r\n  const handleMouseLeave = useCallback(() => {\r\n    changeCursorUp(false);\r\n    changeCursorHide(true);\r\n    // setMouseUp(false);\r\n    // setHide(true);\r\n  }, []);\r\n\r\n  const handleMouseDown = useCallback(() => {\r\n    changeCursorUp(false);\r\n    changeCursorDown(true);\r\n    // setMouseUp(false);\r\n    // setMouseDown(true);\r\n  }, []);\r\n\r\n  const handleMouseUp = useCallback(() => {\r\n    changeCursorDown(false);\r\n    changeCursorUp(true);\r\n    // setMouseDown(false);\r\n    // setMouseUp(true);\r\n  }, []);\r\n\r\n  const handleContextMenu = useCallback((event) => {\r\n    event.preventDefault();\r\n    return false;\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    document.onmousemove = handleMouseMove;\r\n    document.onmouseenter = handleMouseEnter;\r\n    document.onmouseleave = handleMouseLeave;\r\n    document.onmousedown = handleMouseDown;\r\n    document.onmouseup = handleMouseUp;\r\n    document.oncontextmenu = handleContextMenu;\r\n  });\r\n\r\n  return (\r\n    <div\r\n      className={cursorClass}\r\n      style={{\r\n        transform: \"translate(\" + cursorData.x + \"px, \" + cursorData.y + \"px)\",\r\n      }}\r\n    >\r\n      <div className=\"goccia\"></div>\r\n      <div className=\"text\">{cursorData.text}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nCursor.propTypes = {\r\n  playerId: PropTypes.string,\r\n  cursorData: PropTypes.object.isRequired,\r\n  changeCursorX: PropTypes.func.isRequired,\r\n  changeCursorY: PropTypes.func.isRequired,\r\n  changeCursorUp: PropTypes.func.isRequired,\r\n  changeCursorDown: PropTypes.func.isRequired,\r\n  changeCursorHide: PropTypes.func.isRequired,\r\n};\r\n\r\nCursor.defaultProps = {\r\n  playerId: null,\r\n};\r\n\r\nexport default Cursor;\r\n","import React, { useMemo, useCallback, useEffect, useState } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport \"./cursor.css\";\r\n\r\nconst CursorGhost = ({ playerId, gameData }) => {\r\n  if (!gameData || !gameData[playerId + \"_userName\"]) return null;\r\n\r\n  const cursorColor = useMemo(() => {\r\n    switch (playerId) {\r\n      case \"playerBlue\":\r\n        return \"blue\";\r\n        break;\r\n      case \"playerRed\":\r\n        return \"red\";\r\n        break;\r\n      case \"playerGreen\":\r\n        return \"green\";\r\n        break;\r\n      case \"playerYellow\":\r\n        return \"yellow\";\r\n        break;\r\n      default:\r\n        return null;\r\n        break;\r\n    }\r\n  }, [playerId]);\r\n\r\n  const cursorClass = useMemo(\r\n    () =>\r\n      [\r\n        \"cursor\",\r\n        gameData[playerId + \"_cursorHide\"] ? \"hidden\" : null,\r\n        cursorColor,\r\n      ]\r\n        .filter((x) => !!x)\r\n        .join(\" \"),\r\n    [cursorColor, gameData[playerId + \"_cursorHide\"]]\r\n  );\r\n\r\n  return (\r\n    <div\r\n      className={cursorClass}\r\n      style={{\r\n        transform:\r\n          \"translate(\" +\r\n          gameData[playerId + \"_cursorX\"] +\r\n          \"px, \" +\r\n          gameData[playerId + \"_cursorY\"] +\r\n          \"px)\",\r\n      }}\r\n    >\r\n      <div className=\"goccia\"></div>\r\n      <div className=\"text\">{gameData[playerId + \"_cursorText\"]}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nCursorGhost.propTypes = {\r\n  playerId: PropTypes.string,\r\n  gameData: PropTypes.object,\r\n};\r\n\r\nCursorGhost.defaultProps = {\r\n  playerId: null,\r\n  gameData: null,\r\n};\r\n\r\nexport default CursorGhost;\r\n","import React, { useState, useCallback, useEffect } from \"react\";\n\nimport Background from \"./scenes/background\";\nimport Menu from \"./scenes/menu\";\nimport Pregame from \"./scenes/pregame\";\nimport JoinPregame from \"./scenes/joinPregame\";\nimport CharacterSelection from \"./scenes/characterSelection\";\n\nimport { Cursor, CursorGhost } from \"./components/cursor\";\n\nimport { appVersion, CLIENT_SCENES, LSKEY } from \"./logic/constants\";\nimport { updateMyPlayer } from \"./logic/database\";\nimport { uuidv4 } from \"./logic/utility\";\n\nimport \"./App.css\";\n\nconst App = () => {\n  // CLIENT DATA ##########################################\n\n  const [clientData, setClientData] = useState(() => {\n    const lsValue = JSON.parse(localStorage.getItem(LSKEY.CLIENT_DATA));\n\n    // Se ho i dati e la versione è uguale uso quelli pulendo solo la scene corrente\n    if (lsValue?.appVersion === appVersion) {\n      return { ...lsValue, clientScene: CLIENT_SCENES.MENU };\n    }\n\n    const defaultValues = {\n      appVersion: appVersion,\n      deviceId: uuidv4(),\n      clientScene: CLIENT_SCENES.MENU,\n      userName: \"\",\n      currentLobbyKey: null,\n      playerId: null,\n      cursor: {\n        x: 0,\n        y: 0,\n        mouseUp: false,\n        mouseDown: false,\n        hide: true,\n        text: \"\",\n      },\n    };\n\n    // Se ho i dati, la versione è diversa e ho il vecchio device id pulisco tutto mantenendo quello e lo user name\n    if (lsValue && lsValue.appVersion !== appVersion && !!lsValue.deviceId) {\n      return {\n        ...defaultValues,\n        deviceId: lsValue.deviceId,\n        userName: lsValue.userName,\n      };\n    }\n\n    return defaultValues;\n  });\n\n  useEffect(() => {\n    updateMyPlayer(clientData);\n    localStorage.setItem(LSKEY.CLIENT_DATA, JSON.stringify(clientData));\n  }, [clientData]);\n\n  const changeClientScene = useCallback((newScene) => {\n    setClientData((prev) => ({ ...prev, clientScene: newScene }));\n  }, []);\n\n  const changeUserName = useCallback((newUserName) => {\n    setClientData((prev) => ({ ...prev, userName: newUserName }));\n  }, []);\n\n  const changeCurrentLobbyKey = useCallback((newCurrentLobbyKey) => {\n    setClientData((prev) => ({ ...prev, currentLobbyKey: newCurrentLobbyKey }));\n  }, []);\n\n  const changePlayerId = useCallback((newPlayerId) => {\n    setClientData((prev) => ({ ...prev, playerId: newPlayerId }));\n  }, []);\n\n  // CLIENT DATA CURSOR ##########################################\n\n  const changeCursorX = useCallback((newValue) => {\n    setClientData((prev) => ({\n      ...prev,\n      cursor: { ...prev.cursor, x: newValue, hide: false },\n    }));\n  }, []);\n  const changeCursorY = useCallback((newValue) => {\n    setClientData((prev) => ({\n      ...prev,\n      cursor: { ...prev.cursor, y: newValue, hide: false },\n    }));\n  }, []);\n  const changeCursorUp = useCallback((newValue) => {\n    setClientData((prev) => ({\n      ...prev,\n      cursor: { ...prev.cursor, mouseUp: newValue },\n    }));\n  }, []);\n  const changeCursorDown = useCallback((newValue) => {\n    setClientData((prev) => ({\n      ...prev,\n      cursor: { ...prev.cursor, mouseDown: newValue },\n    }));\n  }, []);\n  const changeCursorHide = useCallback((newValue) => {\n    setClientData((prev) => ({\n      ...prev,\n      cursor: { ...prev.cursor, hide: newValue },\n    }));\n  }, []);\n\n  // GAME DATA ##########################################\n\n  const [gameData, setGameData] = useState(null);\n\n  const mergeGameData = useCallback((newValue) => {\n    setGameData((prev) => ({\n      ...prev,\n      ...newValue,\n    }));\n  }, []);\n\n  const resetGameData = useCallback(() => {\n    setGameData(null);\n  }, []);\n\n  // EFFETTI ##########################################\n\n  useEffect(() => {\n    console.log(\"gameData changed: \", { ...gameData });\n  }, [gameData]);\n\n  return (\n    <>\n      <Background />\n      {CLIENT_SCENES.MENU === clientData.clientScene && (\n        <Menu\n          clientData={clientData}\n          changeUserName={changeUserName}\n          changeCurrentLobbyKey={changeCurrentLobbyKey}\n          changeClientScene={changeClientScene}\n          mergeGameData={mergeGameData}\n          resetGameData={resetGameData}\n        />\n      )}\n      {CLIENT_SCENES.LOBBY_PREGAME === clientData.clientScene && (\n        <Pregame\n          clientData={clientData}\n          gameData={gameData}\n          changePlayerId={changePlayerId}\n          changeClientScene={changeClientScene}\n        />\n      )}\n      {CLIENT_SCENES.JOIN_LOBBY_PREGAME === clientData.clientScene && (\n        <JoinPregame\n          clientData={clientData}\n          changeCurrentLobbyKey={changeCurrentLobbyKey}\n          changeClientScene={changeClientScene}\n          mergeGameData={mergeGameData}\n        />\n      )}\n      {CLIENT_SCENES.CHARACTER_SELECTION === clientData.clientScene && (\n        <CharacterSelection changeClientScene={changeClientScene} />\n      )}\n\n      {CLIENT_SCENES.CHARACTER_SELECTION === clientData.clientScene &&\n        clientData.playerId !== \"playerBlue\" && (\n          <CursorGhost playerId=\"playerBlue\" gameData={gameData} />\n        )}\n      {CLIENT_SCENES.CHARACTER_SELECTION === clientData.clientScene &&\n        clientData.playerId !== \"playerRed\" && (\n          <CursorGhost playerId=\"playerRed\" gameData={gameData} />\n        )}\n      {CLIENT_SCENES.CHARACTER_SELECTION === clientData.clientScene &&\n        clientData.playerId !== \"playerGreen\" && (\n          <CursorGhost playerId=\"playerGreen\" gameData={gameData} />\n        )}\n      {CLIENT_SCENES.CHARACTER_SELECTION === clientData.clientScene &&\n        clientData.playerId !== \"playerYellow\" && (\n          <CursorGhost playerId=\"playerYellow\" gameData={gameData} />\n        )}\n      {clientData.cursor && (\n        <Cursor\n          playerId={clientData.playerId}\n          cursorData={clientData.cursor}\n          changeCursorX={changeCursorX}\n          changeCursorY={changeCursorY}\n          changeCursorUp={changeCursorUp}\n          changeCursorDown={changeCursorDown}\n          changeCursorHide={changeCursorHide}\n        />\n      )}\n    </>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App.jsx\";\n\nReactDOM.render(<App />, document.getElementById(\"app\"));\n"],"sourceRoot":""}